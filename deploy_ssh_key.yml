---
- name: Deploy SSH key
  hosts: all
  become: yes
  tasks:
    - name: create a file
      file:
        path: /home/{{ ansible_user }}/.ssh/newfile
        state: touch
        mode: 0700
        owner: "{{ ansible_user }}"
        group: "{{ ansible_user }}"

    - name: echo into file
      lineinfile:
        path: /home/{{ ansible_user }}/.ssh/newfile
        line: "{{ ssh_key }}"
        state: present
        mode: 0600
        owner: "{{ ansible_user }}"
        group: "{{ ansible_user }}"
